# SillyTavern Management Dashboard - Requirements Confirmation

## Original Request Summary
用户希望将现有的SSH终端监控页面改造为SillyTavern管理仪表板，目标是帮助小白用户通过可视化界面管理SillyTavern，而无需掌握Linux命令。

## Core User Problem
小白用户无法理解Linux命令，需要友好的可视化界面来安装和管理SillyTavern服务。

## Initial Feature Scope
基于用户描述的三个核心部分：
1. **系统监控详情** - 持久化显示服务器状态
2. **一键脚本操作** - 酒馆部署、重启、账密管理、日志查看等
3. **登录详情展示** - SillyTavern访问信息

## Requirements Quality Assessment Progress
- 开始时间: 当前
- 目标质量分数: ≥90分
- 当前状态: 初始评估中

## Clarification Rounds
### Round 1 - 功能明确性澄清 ✅ 已完成

用户详细回答了所有功能问题，明确了：
1. **页面架构**: 在SSH终端前置首页添加导航页面，包含两个卡片选项
2. **监控需求**: Docker容器状态监控，双频率刷新机制（3秒/10-20秒）
3. **脚本交互**: 支持页面表单交互，如弹窗填写用户名密码
4. **管理功能**: 容器重启、在线配置文件修改、容器日志查看
5. **用户体验**: 进度显示、确认弹窗、一键复制等

**功能明确性得分: 28/30** (非常明确的功能需求和用户体验设计)

### Round 2 - 技术规格澄清 ✅ 已完成

用户详细回答了技术实现问题，明确了：
1. **前端架构**: `/`重定向到`/dashboard`，SSH终端调整为`/terminal`，同窗口切换
2. **后端设计**: 解耦服务架构，WebSocket实时推送，优雅的技术方案
3. **脚本集成**: Shell逻辑重写为Java代码，便于用户交互集成
4. **权限处理**: Java代码操作文件，sudo权限执行Docker命令
5. **数据获取**: 实时读取服务器状态，无需数据库持久化
6. **双用户群体**: Terminal(有Linux能力) + SillyTavern Dashboard(纯小白)

**技术规格得分: 24/25** (明确的技术路线和架构选择)

### Round 3 - 实现完整性澄清 ✅ 已完成

用户详细回答了边缘情况和完整性问题，明确了：
1. **错误处理**: 部署失败暂停，root权限检查，网络失败弹窗提示
2. **状态一致性**: 浏览器重连状态恢复，WebSocket自动重连机制
3. **数据验证**: 用户名密码格式验证，端口冲突自动处理，磁盘空间预检查(>500MB)
4. **安全考虑**: root权限执行，敏感信息加密传输
5. **操作流程**: 升级流程(pull+restart)，删除功能，7天日志保留
6. **用户体验**: 详细进度条(大小/速度)，操作中断和资源不足报错

**补充需求 - 数据管理功能**:
- **数据导出**: 压缩./data目录为ZIP文件，浏览器下载
- **数据导入**: 用户上传ZIP压缩包，验证根目录包含data文件夹

**实现完整性得分: 24/25** (全面的边缘情况考虑和错误处理)

### Round 4 - 业务背景确认 ✅ 已完成

用户明确了业务价值和优先级：
1. **目标用户**: 完全不懂命令行的小白用户，20-40并发场景，个人部署为主
2. **支持系统**: 基于detect_os.sh，支持Ubuntu/Debian/CentOS/RHEL/SUSE/Alpine等主流发行版
3. **成功标准**: 实现全部功能，支持20-40并发，重点关注交互友好性和UI体验
4. **技术约束**: 平均1GB数据文件，需要设计合理的文件清理机制防止磁盘溢出
5. **扩展性**: 未来可能支持其他类似应用管理，但暂不需要多服务器支持

**建议功能优先级排序**:
1. **导航首页和页面架构调整** (基础框架)
2. **SillyTavern一键部署** (核心功能)  
3. **进度显示和用户交互优化** (用户体验)
4. **系统监控扩展（Docker容器状态）** (状态感知)
5. **服务管理（重启、升级、删除）** (基础管理)
6. **配置管理（用户名密码修改）** (配置调整)
7. **日志查看** (问题诊断)
8. **数据导入导出** (数据管理)

**业务背景得分: 19/20** (清晰的业务价值和用户定位)

## 最终需求质量评估

### 综合得分统计
- **功能明确性**: 28/30分
- **技术规格**: 24/25分  
- **实现完整性**: 24/25分
- **业务背景**: 19/20分

**总分: 95/100分** ✅ (超过90分质量门槛)

## 确认完成的需求规格

### 核心功能定义
**双页面架构**:
- **Dashboard页面** (`/dashboard`): 导航首页，包含SillyTavern控制台和SSH客户端两个卡片选项
- **Terminal页面** (`/terminal`): 现有SSH终端功能，面向有Linux能力的用户

**SillyTavern控制台功能**:
- **系统监控**: 集成Docker容器状态，双频率刷新(3秒/10-20秒)
- **一键部署**: Shell逻辑重写为Java代码，支持用户交互表单
- **服务管理**: 容器重启、升级(pull+restart)、删除功能
- **配置管理**: 在线修改用户名密码，实时更新config.yaml
- **日志查看**: 显示容器日志，7天自动清理
- **数据管理**: ZIP格式导出./data，上传验证导入
- **访问信息**: 显示地址、端口、凭据，支持一键复制

### 技术实现方案
- **前端**: Vue 3路由调整，WebSocket实时通信，友好的UI交互
- **后端**: Java重写脚本逻辑，解耦服务架构，root权限执行
- **文件管理**: 服务器临时存储+自动清理，支持1GB数据文件处理
- **错误处理**: 全面的验证、权限检查、友好错误提示

### 用户体验设计
- **小白友好**: 零命令行操作，可视化界面，进度反馈
- **并发支持**: 20-40用户并发访问优化
- **数据安全**: 敏感信息加密传输，配置文件权限管理